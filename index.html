<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сохранение и вывод данных</title>
</head>
<body>
    <label for="data">Введите информацию:</label><br>
    <input type="text" id="data" name="data">
    <button onclick="saveData()">Сохранить</button>

    <div id="output"></div>

    <script>
        // Функция для сохранения данных
        function saveData() {
            var inputData = document.getElementById("data").value;

            // Создаем новый объект XMLHttpRequest
            var xhr = new XMLHttpRequest();

            // Конфигурируем его: POST-запрос, адрес save_data.php
            xhr.open('POST', 'save_data.php', true);

            // Устанавливаем заголовок Content-Type
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

            // Посылаем запрос
            xhr.send('data=' + inputData);

            // При успешной отправке данных обновляем вывод на странице
            xhr.onload = function() {
                if (xhr.status === 200) {
                    displayData();
                } else {
                    console.error('Ошибка сохранения данных:', xhr.statusText);
                }
            };
        }

        // Функция для вывода данных
        function displayData() {
            // Создаем новый объект XMLHttpRequest
            var xhr = new XMLHttpRequest();

            // Конфигурируем его: GET-запрос, адрес read_data.php
            xhr.open('GET', 'read_data.php', true);

            // Посылаем запрос
            xhr.send();

            // При успешном получении данных обновляем вывод на странице
            xhr.onload = function() {
                if (xhr.status === 200) {
                    document.getElementById('output').innerHTML = xhr.responseText;
                } else {
                    console.error('Ошибка чтения данных:', xhr.statusText);
                }
            };
        }

        // При загрузке страницы выводим уже сохраненные данные
        window.onload = displayData;
    </script>
</body>
</html>
